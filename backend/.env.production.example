# S4 Labs Backend Production Environment Configuration
# ======================================================
# Copy this to .env for production deployment

# Server Configuration
NODE_ENV=production
PORT=4000
BASE_URL=https://api.s4labs.io

# Database Configuration (PostgreSQL)
DATABASE_URL=postgresql://s4labs_user:SECURE_PASSWORD@db.s4labs.io:5432/s4labs_prod?sslmode=require&connection_limit=20

# Redis Cache Configuration
REDIS_URL=redis://:REDIS_PASSWORD@redis.s4labs.io:6379/0

# Authentication & Security
JWT_SECRET=GENERATE_64_CHARACTER_RANDOM_STRING_HERE
JWT_EXPIRES_IN=7d
ENCRYPTION_KEY=GENERATE_32_CHARACTER_RANDOM_STRING_HERE
HEALTH_CHECK_KEY=GENERATE_RANDOM_KEY_FOR_HEALTH_CHECK

# CORS Configuration
ALLOWED_ORIGINS=https://s4labs.io,https://www.s4labs.io,https://app.s4labs.io

# Blockchain Configuration
BASE_RPC_URL=https://mainnet.base.org
BASE_SEPOLIA_RPC_URL=https://base-sepolia.drpc.org
ALCHEMY_API_KEY=YOUR_ALCHEMY_API_KEY
PRIVATE_KEY=0x_YOUR_WALLET_PRIVATE_KEY_FOR_CONTRACT_DEPLOYMENT

# Smart Contract Addresses (Base Mainnet)
TOKEN_FACTORY_ADDRESS=0x_DEPLOYED_CONTRACT_ADDRESS
BONDING_CURVE_ADDRESS=0x_DEPLOYED_CONTRACT_ADDRESS
GRADUATION_MANAGER_ADDRESS=0x_DEPLOYED_CONTRACT_ADDRESS
ESCROW_FACTORY_ADDRESS=0x_DEPLOYED_CONTRACT_ADDRESS
TREASURY_ADDRESS=0x_DEPLOYED_CONTRACT_ADDRESS

# Rate Limiting Configuration
RATE_LIMIT_WINDOW_MS=900000     # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100     # Per window
AUTH_RATE_LIMIT_MAX=5            # Auth attempts per window
UPLOAD_RATE_LIMIT_MAX=10         # Uploads per hour

# File Upload Configuration
MAX_FILE_SIZE=5242880            # 5MB
UPLOAD_PATH=/var/app/uploads
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,image/webp

# Admin Configuration
ADMIN_ADDRESSES=0xADMIN1,0xADMIN2,0xADMIN3

# Monitoring & Logging
SENTRY_DSN=https://YOUR_SENTRY_DSN@sentry.io/PROJECT_ID
LOG_LEVEL=warn
LOG_FILE_PATH=/var/log/s4labs/backend.log
ENABLE_REQUEST_LOGGING=true
ENABLE_PERFORMANCE_MONITORING=true

# Email Configuration (Optional)
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASS=YOUR_SENDGRID_API_KEY
EMAIL_FROM=noreply@s4labs.io

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_INTERVAL=86400000        # 24 hours
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=s4labs-backups
AWS_ACCESS_KEY_ID=YOUR_AWS_KEY
AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET
AWS_REGION=us-east-1

# Performance Tuning
MAX_CONNECTIONS=100
CONNECTION_TIMEOUT=30000
QUERY_TIMEOUT=10000
CACHE_TTL=3600

# Feature Flags
ENABLE_WEBSOCKET=true
ENABLE_RATE_LIMITING=true
ENABLE_FILE_UPLOAD=true
ENABLE_EMAIL_NOTIFICATIONS=false
MAINTENANCE_MODE=false

# Security Headers
HSTS_MAX_AGE=31536000
CSP_DIRECTIVES="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self'; connect-src 'self';"

# Deployment Configuration
DEPLOY_ENV=production
DEPLOY_REGION=us-east-1
CDN_URL=https://cdn.s4labs.io

# Notes:
# 1. Generate secure random strings for secrets using: openssl rand -hex 32
# 2. Use environment-specific values for all URLs and credentials
# 3. Enable SSL/TLS for all connections (database, Redis, etc.)
# 4. Set up proper firewall rules to restrict access
# 5. Use secrets management service (AWS Secrets Manager, HashiCorp Vault, etc.)
# 6. Regularly rotate sensitive credentials
# 7. Monitor all services with appropriate alerting